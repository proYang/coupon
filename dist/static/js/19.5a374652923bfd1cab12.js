webpackJsonp([19],{1006:function(e,r,o){var t=o(944);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);o(483)("0f391c54",t,!0)},1037:function(e,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={data:function(){return{ruleForm:{name:"",couponType:void 0,rebate:void 0,condition:0,discount:0,desc:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,message:"至少3个字符",trigger:"blur"}],couponType:[{required:!0,message:"请选择优惠券类型",trigger:"change"}],rebate:[{required:!0,message:"请输入折扣率",trigger:"blur"}],condition:[{required:!0,message:"请输入满足金额",trigger:"blur"}],discount:[{required:!0,message:"请输入折扣金额",trigger:"blur"}],desc:[{required:!1,message:"请填写活动形式",trigger:"blur"}]}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate(function(o){if(!o)return console.log("error submit!!"),!1;if(r.ruleForm.rebate=parseFloat(r.ruleForm.rebate),r.ruleForm.condition=parseFloat(r.ruleForm.condition),r.ruleForm.discount=parseFloat(r.ruleForm.discount),2==r.ruleForm.couponType){if(r.ruleForm.rebate>1||r.ruleForm.rebate<0||isNaN(r.ruleForm.rebate))return void r.$alert("输入的折扣率有误","提示",{confirmButtonText:"我知道了"})}else if(1==r.ruleForm.couponType&&(r.ruleForm.condition<0||r.ruleForm.discount<0||r.ruleForm.condition<r.ruleForm.discount||isNaN(r.ruleForm.discount)||isNaN(r.ruleForm.condition)))return void r.$alert("输入的折扣金额或满足金额有误","提示",{confirmButtonText:"我知道了"});var t={type_id:r.ruleForm.couponType,display_name:r.ruleForm.name};2==r.ruleForm.couponType?t.discount=r.ruleForm.rebate:(t.discount=r.ruleForm.discount,t.condition=r.ruleForm.condition),r.$api.addCoupon(t).then(function(o){o.error?r.$alert(o.error,"提示",{confirmButtonText:"我知道了"}):(r.$alert("添加优惠券成功，快去投放吧","提示",{confirmButtonText:"我知道了"}),r.$refs[e].resetFields())})})},resetForm:function(e){this.$refs[e].resetFields()}}}},497:function(e,r,o){o(1006);var t=o(185)(o(1037),o(983),"data-v-710c4da9",null);e.exports=t.exports},944:function(e,r,o){r=e.exports=o(482)(),r.push([e.i,".coupon-form[data-v-710c4da9]{width:600px;height:auto}",""])},983:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",[o("div",{staticClass:"plugins-tips"},[e._v("添加优惠券")]),e._v(" "),o("div",{staticClass:"coupon-form"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"优惠券名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"填写优惠券名称"},model:{value:e.ruleForm.name,callback:function(r){e.ruleForm.name=r},expression:"ruleForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"优惠券类型",prop:"couponType"}},[o("el-select",{attrs:{placeholder:"请选择优惠券类型"},model:{value:e.ruleForm.couponType,callback:function(r){e.ruleForm.couponType=r},expression:"ruleForm.couponType"}},[o("el-option",{attrs:{label:"满减券",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"折扣券",value:"2"}})],1)],1),e._v(" "),"2"==e.ruleForm.couponType?o("el-form-item",{attrs:{label:"折扣率",prop:"rebate"}},[o("el-input",{attrs:{placeholder:"例如：0.85"},model:{value:e.ruleForm.rebate,callback:function(r){e.ruleForm.rebate=r},expression:"ruleForm.rebate"}})],1):e._e(),e._v(" "),"1"==e.ruleForm.couponType?o("el-form-item",{attrs:{label:"满足金额",prop:"condition"}},[o("el-input",{attrs:{placeholder:"单位：元"},model:{value:e.ruleForm.condition,callback:function(r){e.ruleForm.condition=r},expression:"ruleForm.condition"}})],1):e._e(),e._v(" "),"1"==e.ruleForm.couponType?o("el-form-item",{attrs:{label:"抵扣金额",prop:"discount"}},[o("el-input",{attrs:{placeholder:"单位：元"},model:{value:e.ruleForm.discount,callback:function(r){e.ruleForm.discount=r},expression:"ruleForm.discount"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"备注",prop:"desc"}},[o("el-input",{attrs:{type:"textarea",placeholder:"填写备注信息"},model:{value:e.ruleForm.desc,callback:function(r){e.ruleForm.desc=r},expression:"ruleForm.desc"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("立即添加")]),e._v(" "),o("el-button",{on:{click:function(r){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])},staticRenderFns:[]}}});